<div class="app-container">
  <header class="app-header">
    <h1>{{ title }}</h1>
    <div *ngIf="session.isAuthenticated()" class="user-context">
      <span>Welcome, {{ session.getDisplayName() || 'User' }}!</span>
      <button type="button" (click)="logout()">Logout</button>
    </div>
  </header>

  <section class="notification-center" *ngIf="(notifications$ | async) as notices">
    <div *ngFor="let notice of notices" class="notification" [ngClass]="notice.type">
      <span>{{ notice.message }}</span>
      <button type="button" (click)="dismissNotification(notice.id)" aria-label="Dismiss notification">Ã—</button>
    </div>
  </section>

  <urp-login
    *ngIf="!session.isAuthenticated()"
    [isLoading]="isLoading"
    [error]="loginError"
    (login)="handleLogin($event)"
  ></urp-login>

  <ng-container *ngIf="session.isAuthenticated()">
    <nav class="workspace-nav">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">Operations</a>
      <a *ngIf="session.hasAdminRole()" routerLink="/admin" routerLinkActive="active">Administration</a>
    </nav>
    <router-outlet></router-outlet>
  </ng-container>
</div>
